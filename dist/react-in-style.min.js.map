{"version":3,"file":"react-in-style.js","sources":["react-in-style.js","/source/react-in-style.js"],"names":["global","factory","exports","module","define","amd","ReactInStyle","this","options","setOptions","init","requestAnimationFrame","func","inBrowser","document","unApliedStyles","appliedStyles","initStyleTag","destroy","styleTag","parentNode","removeChild","createElement","innerHTML","id","_this","getElementsByTagName","appendChild","add","reactClass","selector","force","undefined","arguments","log","console","error","prototype","style","Mocha","applyStyles","renderStyles","bind","Object","keys","forEach","styleString","objToCss","f","rootSelector","styles","rootStyle","key","spacer","firstLetter","substring","replace","newKey","unshift","trim","join","react_in_style"],"mappings":"+TCAC,SAAUA,EAAQC,GACI,gBAAZC,UAA0C,mBAAXC,QAAyBA,OAAOD,QAAUD,IAC9D,kBAAXG,SAAyBA,OAAOC,IAAMD,OAAOH,GACpDD,EAAOM,aAAeL,KACxBM,KAAM,WAAc,gBAGZD,GAAY,WACH,QADTA,GACUE,wBADVF,GAEEC,KAAKE,WAAWD,GAChBD,KAAKG,2BAHPJ,GAKFK,gJAAqB,SAACC,GACmB,mBAA1BD,uBACPC,IAEAD,sBAAsBC,MAG9BH,kBAAU,SAACD,GACPA,EAAUA,MACVD,KAAKC,QAAUA,EACfD,KAAKM,UAAgC,mBAAbC,YAE5BJ,YAAI,WACAH,KAAKQ,kBACLR,KAAKS,iBACLT,KAAKU,iBAETC,eAAO,WACCX,KAAKY,SAASC,YACdb,KAAKY,SAASC,WAAWC,YAAYd,KAAKY,UAE9CZ,KAAKG,SAETO,oBAAY,qBAEJV,MAAKY,SADLZ,KAAKM,UACWC,SAASQ,cAAc,UAInCC,UAAW,IAGnBhB,KAAKY,SAASK,GAAK,iBACnBjB,KAAKI,sBAAsB,WACnBc,EAAKZ,WACLC,SAASY,qBAAqB,QAAQ,GAAGC,YAAYF,EAAKN,cAItES,WAAG,SAACC,EAAYC,MAAUC,GAAKC,SAAAC,UAAA,IAAG,EAAKA,UAAA,EAC/B1B,MAAKS,cAAcc,KAAcC,GACjCxB,KAAK2B,IAAI,iBAAMC,SAAQC,MAAM,YAAcN,EAAW,iCAE1DvB,KAAKQ,eAAee,GAAYD,EAAWQ,UAAUC,MAEhC,mBAAVC,OACPhC,KAAKiC,cAELjC,KAAKkC,iBAIbD,mBAAW,WACPjC,KAAKI,sBAAsBJ,KAAKkC,aAAaC,KAAKnC,SAEtDkC,oBAAY,qBACRE,QAAOC,KAAKrC,KAAKQ,gBAAgB8B,QAAQ,SAACf,GACtC,GAAIQ,GAAQb,EAAKV,eAAee,SACzBL,GAAKV,eAAee,GAC3BL,EAAKT,cAAcc,GAAYQ,CAC/B,IAAIQ,GAAcrB,EAAKsB,SAAST,EAAOR,EACvCL,GAAKN,SAASI,WAAauB,EAAc,SAGjDZ,WAAG,SAACc,GACIb,SACAa,MAGRD,gBAAQ,SAACT,cAAOW,EAAYjB,SAAAC,UAAA,GAAG,GAAEA,UAAA,GAAEiB,EAAMlB,SAAAC,UAAA,MAAKA,UAAA,GACtCkB,EAAY,EAsBhB,OArBAR,QAAOC,KAAKN,GAAOO,QAAQ,SAACO,GACxB,GAAIC,GAAS,IACbC,EAAcF,EAAI,GAClBtB,EAAWsB,CAOX,IALoB,MAAhBE,IACAD,EAAS,GACTvB,EAAWsB,EAAIG,UAAU,IAE7BzB,EAAWA,EAAS0B,QAAQ,KAAMP,GACR,gBAAfX,GAAMc,GACbD,GAAaC,EAAM,IAAMd,EAAMc,GAAO,SACnC,CACiB,MAAhBE,IACAD,EAAS,GAEb,IAAII,GAASR,EAAeI,EAASvB,CACrCL,GAAKsB,SAAST,EAAMc,GAAMK,EAAQP,MAG1CA,EAAOQ,QAAQT,EAAaU,OAAS,IAAMR,EAAUQ,OAAS,KACvDT,EAAOU,KAAK,UAjGrBtD,KAqGFuD,EAAiB,GAAIvD,EAEzB,OAAOuD;;;;AD9GX,AAAC,CAAA,UAAU,MAAM,EAAE,OAAO,EAAE;AACxB,WAAO,OAAO,KAAK,QAAQ,IAAI,OAAO,MAAM,KAAK,WAAW,GAAG,MAAM,CAAC,OAAO,GAAG,OAAO,EAAE,GACzF,OAAO,MAAM,KAAK,UAAU,IAAI,MAAM,CAAC,GAAG,GAAG,MAAM,CAAC,OAAO,CAAC,GAC5D,MAAM,CAAC,YAAY,GAAG,OAAO,EAAE,CAAA;CAClC,CAAA,CAAC,IAAI,EAAE,YAAY;AAAE,gBAAY,CAAC;;;;QAGzB,YAAY;AACH,iBADT,YAAY,CACF,OAAO,EAAE;kCADnB,YAAY;;AAEV,gBAAI,CAAC,UAAU,CAAC,OAAO,CAAC,CAAC;AACzB,gBAAI,CAAC,IAAI,EAAE,CAAC;SACf;;qBAJC,YAAY;AAKd,iCAAqB;;;;;;;;;;;mBAAA,UAAC,IAAI,EAAE;AACxB,wBAAI,OAAO,qBAAqB,KAAK,WAAW,EAAE;AAC9C,4BAAI,EAAE,CAAC;qBACV,MAAM;AACH,6CAAqB,CAAC,IAAI,CAAC,CAAC;qBAC/B;iBACJ;;AACD,sBAAU;uBAAA,oBAAC,OAAO,EAAE;AAChB,2BAAO,GAAG,OAAO,IAAI,EAAE,CAAC;AACxB,wBAAI,CAAC,OAAO,GAAG,OAAO,CAAC;AACvB,wBAAI,CAAC,SAAS,GAAG,OAAO,QAAQ,KAAK,WAAW,CAAC;iBACpD;;AACD,gBAAI;uBAAA,gBAAG;AACH,wBAAI,CAAC,cAAc,GAAG,EAAE,CAAC;AACzB,wBAAI,CAAC,aAAa,GAAG,EAAE,CAAC;AACxB,wBAAI,CAAC,YAAY,EAAE,CAAC;iBACvB;;AACD,mBAAO;uBAAA,mBAAG;AACN,wBAAI,IAAI,CAAC,QAAQ,CAAC,UAAU,EAAE;AAC1B,4BAAI,CAAC,QAAQ,CAAC,UAAU,CAAC,WAAW,CAAC,IAAI,CAAC,QAAQ,CAAC,CAAC;qBACvD;AACD,wBAAI,CAAC,IAAI,EAAE,CAAC;iBACf;;AACD,wBAAY;uBAAA,wBAAG;;;AACX,wBAAI,IAAI,CAAC,SAAS,EAAE;AAChB,4BAAI,CAAC,QAAQ,GAAG,QAAQ,CAAC,aAAa,CAAC,OAAO,CAAC,CAAC;qBACnD,MAAM;;AAEH,4BAAI,CAAC,QAAQ,GAAG;AACZ,qCAAS,EAAE,EAAE;yBAChB,CAAC;qBACL;AACD,wBAAI,CAAC,QAAQ,CAAC,EAAE,GAAG,gBAAgB,CAAC;AACpC,wBAAI,CAAC,qBAAqB,CAAC,YAAM;AAC7B,4BAAI,MAAK,SAAS,EAAE;AAChB,oCAAQ,CAAC,oBAAoB,CAAC,MAAM,CAAC,CAAC,CAAC,CAAC,CAAC,WAAW,CAAC,MAAK,QAAQ,CAAC,CAAC;yBACvE;qBACJ,CAAC,CAAC;iBACN;;AACD,eAAG;uBAAA,aAAC,UAAU,EAAE,QAAQ,EAAiB;wBAAf,KAAK,gCAAG,KAAK;;AACnC,wBAAI,IAAI,CAAC,aAAa,CAAC,QAAQ,CAAC,IAAI,CAAC,KAAK,EAAE;AACxC,4BAAI,CAAC,GAAG,CAAC;mCAAM,OAAO,CAAC,KAAK,CAAC,WAAW,GAAG,QAAQ,GAAG,6BAA6B,CAAC;yBAAA,CAAC,CAAC;qBACzF;AACD,wBAAI,CAAC,cAAc,CAAC,QAAQ,CAAC,GAAG,UAAU,CAAC,SAAS,CAAC,KAAK,CAAC;;AAE3D,wBAAI,OAAO,KAAK,KAAK,WAAW,EAAE;AAC9B,4BAAI,CAAC,WAAW,EAAE,CAAC;qBACtB,MAAM;AACH,4BAAI,CAAC,YAAY,EAAE,CAAC;qBACvB;iBACJ;;AAED,uBAAW;uBAAA,uBAAG;AACV,wBAAI,CAAC,qBAAqB,CAAC,IAAI,CAAC,YAAY,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC,CAAC;iBAC5D;;AACD,wBAAY;uBAAA,wBAAG;;;AACX,0BAAM,CAAC,IAAI,CAAC,IAAI,CAAC,cAAc,CAAC,CAAC,OAAO,CAAC,UAAC,QAAQ,EAAK;AACnD,4BAAI,KAAK,GAAG,MAAK,cAAc,CAAC,QAAQ,CAAC,CAAC;AAC1C,+BAAO,MAAK,cAAc,CAAC,QAAQ,CAAC,CAAC;AACrC,8BAAK,aAAa,CAAC,QAAQ,CAAC,GAAG,KAAK,CAAC;AACrC,4BAAI,WAAW,GAAG,MAAK,QAAQ,CAAC,KAAK,EAAE,QAAQ,CAAC,CAAC;AACjD,8BAAK,QAAQ,CAAC,SAAS,IAAI,WAAW,GAAG,IAAI,CAAC;qBACjD,CAAC,CAAC;iBACN;;AACD,eAAG;uBAAA,aAAC,CAAC,EAAE;AACH,wBAAI,OAAO,EAAE;AACT,yBAAC,EAAE,CAAC;qBACP;iBACJ;;AACD,oBAAQ;uBAAA,kBAAC,KAAK,EAAkC;;;wBAAhC,YAAY,gCAAG,EAAE;wBAAE,MAAM,gCAAG,EAAE;;AAC1C,wBAAI,SAAS,GAAG,EAAE,CAAC;AACnB,0BAAM,CAAC,IAAI,CAAC,KAAK,CAAC,CAAC,OAAO,CAAC,UAAC,GAAG,EAAK;AAChC,4BAAI,MAAM,GAAG,GAAG;4BAChB,WAAW,GAAG,GAAG,CAAC,CAAC,CAAC;4BACpB,QAAQ,GAAG,GAAG,CAAC;;AAEf,4BAAI,WAAW,KAAK,GAAG,EAAE;AACrB,kCAAM,GAAG,EAAE,CAAC;AACZ,oCAAQ,GAAG,GAAG,CAAC,SAAS,CAAC,CAAC,CAAC,CAAC;yBAC/B;AACD,gCAAQ,GAAG,QAAQ,CAAC,OAAO,CAAC,IAAI,EAAE,YAAY,CAAC,CAAC;AAChD,4BAAI,OAAO,KAAK,CAAC,GAAG,CAAC,KAAK,QAAQ,EAAE;AAChC,qCAAS,IAAI,GAAG,GAAG,GAAG,GAAG,KAAK,CAAC,GAAG,CAAC,GAAG,IAAI,CAAC;yBAC9C,MAAM;AACH,gCAAI,WAAW,KAAK,GAAG,EAAE;AACrB,sCAAM,GAAG,EAAE,CAAC;6BACf;AACD,gCAAI,MAAM,GAAG,YAAY,GAAG,MAAM,GAAG,QAAQ,CAAC;AAC9C,kCAAK,QAAQ,CAAC,KAAK,CAAC,GAAG,CAAC,EAAE,MAAM,EAAE,MAAM,CAAC,CAAC;yBAC7C;qBACJ,CAAC,CAAC;AACH,0BAAM,CAAC,OAAO,CAAC,YAAY,CAAC,IAAI,EAAE,GAAG,GAAG,GAAG,SAAS,CAAC,IAAI,EAAE,GAAG,GAAG,CAAC,CAAC;AACnE,2BAAO,MAAM,CAAC,IAAI,CAAC,IAAI,CAAC,CAAC;iBAC5B;;;;eAlGC,YAAY;;;AAqGlB,QAAI,cAAc,GAAG,IAAI,YAAY,EAAE,CAAC;;AAExC,WAAO,cAAc,CAAC;CAEzB,CAAC,CAAE","sourceRoot":"/source/","sourcesContent":["(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.ReactInStyle = factory()\n}(this, function () { 'use strict';\n\n    /* global console */\n    class ReactInStyle {\n        constructor(options) {\n            this.setOptions(options);\n            this.init();\n        }\n        requestAnimationFrame(func) {\n            if (typeof requestAnimationFrame === 'undefined') {\n                func();\n            } else {\n                requestAnimationFrame(func);\n            }\n        }\n        setOptions(options) {\n            options = options || {};\n            this.options = options;\n            this.inBrowser = typeof document !== 'undefined';\n        }\n        init() {\n            this.unApliedStyles = {};\n            this.appliedStyles = {};\n            this.initStyleTag();\n        }\n        destroy() {\n            if (this.styleTag.parentNode) {\n                this.styleTag.parentNode.removeChild(this.styleTag);\n            }\n            this.init();\n        }\n        initStyleTag() {\n            if (this.inBrowser) {\n                this.styleTag = document.createElement('style');\n            } else {\n                // for unit tests\n                this.styleTag = {\n                    innerHTML: ''\n                };\n            }\n            this.styleTag.id = 'react-in-style';\n            this.requestAnimationFrame(() => {\n                if (this.inBrowser) {\n                    document.getElementsByTagName('head')[0].appendChild(this.styleTag);\n                }\n            });\n        }\n        add(reactClass, selector, force = false) {\n            if (this.appliedStyles[selector] && !force) {\n                this.log(() => console.error('selector ' + selector + ' already has styles applied'));\n            }\n            this.unApliedStyles[selector] = reactClass.prototype.style;\n            // find a way to do this without being in an animationFrame\n            if (typeof Mocha === 'undefined') {\n                this.applyStyles();\n            } else {\n                this.renderStyles();\n            }\n        }\n\n        applyStyles() {\n            this.requestAnimationFrame(this.renderStyles.bind(this));\n        }\n        renderStyles() {\n            Object.keys(this.unApliedStyles).forEach((selector) => {\n                var style = this.unApliedStyles[selector];\n                delete this.unApliedStyles[selector];\n                this.appliedStyles[selector] = style;\n                var styleString = this.objToCss(style, selector);\n                this.styleTag.innerHTML += styleString + '\\n';\n            });\n        }\n        log(f) {\n            if (console) {\n                f();\n            }\n        }\n        objToCss(style, rootSelector = '', styles = []) {\n            var rootStyle = '';\n            Object.keys(style).forEach((key) => {\n                let spacer = ' ',\n                firstLetter = key[0], \n                selector = key;\n\n                if (firstLetter === '&') {\n                    spacer = '';\n                    selector = key.substring(1);\n                } \n                selector = selector.replace(/&/g, rootSelector);\n                if (typeof style[key] !== 'object') {\n                    rootStyle += key + ':' + style[key] + '; ';\n                } else {\n                    if (firstLetter === ':') {\n                        spacer = '';\n                    }\n                    var newKey = rootSelector + spacer + selector;\n                    this.objToCss(style[key], newKey, styles);\n                }\n            });\n            styles.unshift(rootSelector.trim() + '{' + rootStyle.trim() + '}');\n            return styles.join('\\n');\n        }\n    }\n\n    var react_in_style = new ReactInStyle();\n\n    return react_in_style;\n\n}));\n","(function (global, factory) {\n    typeof exports === 'object' && typeof module !== 'undefined' ? module.exports = factory() :\n    typeof define === 'function' && define.amd ? define(factory) :\n    global.ReactInStyle = factory()\n}(this, function () { 'use strict';\n\n    /* global console */\n    class ReactInStyle {\n        constructor(options) {\n            this.setOptions(options);\n            this.init();\n        }\n        requestAnimationFrame(func) {\n            if (typeof requestAnimationFrame === 'undefined') {\n                func();\n            } else {\n                requestAnimationFrame(func);\n            }\n        }\n        setOptions(options) {\n            options = options || {};\n            this.options = options;\n            this.inBrowser = typeof document !== 'undefined';\n        }\n        init() {\n            this.unApliedStyles = {};\n            this.appliedStyles = {};\n            this.initStyleTag();\n        }\n        destroy() {\n            if (this.styleTag.parentNode) {\n                this.styleTag.parentNode.removeChild(this.styleTag);\n            }\n            this.init();\n        }\n        initStyleTag() {\n            if (this.inBrowser) {\n                this.styleTag = document.createElement('style');\n            } else {\n                // for unit tests\n                this.styleTag = {\n                    innerHTML: ''\n                };\n            }\n            this.styleTag.id = 'react-in-style';\n            this.requestAnimationFrame(() => {\n                if (this.inBrowser) {\n                    document.getElementsByTagName('head')[0].appendChild(this.styleTag);\n                }\n            });\n        }\n        add(reactClass, selector, force = false) {\n            if (this.appliedStyles[selector] && !force) {\n                this.log(() => console.error('selector ' + selector + ' already has styles applied'));\n            }\n            this.unApliedStyles[selector] = reactClass.prototype.style;\n            // find a way to do this without being in an animationFrame\n            if (typeof Mocha === 'undefined') {\n                this.applyStyles();\n            } else {\n                this.renderStyles();\n            }\n        }\n\n        applyStyles() {\n            this.requestAnimationFrame(this.renderStyles.bind(this));\n        }\n        renderStyles() {\n            Object.keys(this.unApliedStyles).forEach((selector) => {\n                var style = this.unApliedStyles[selector];\n                delete this.unApliedStyles[selector];\n                this.appliedStyles[selector] = style;\n                var styleString = this.objToCss(style, selector);\n                this.styleTag.innerHTML += styleString + '\\n';\n            });\n        }\n        log(f) {\n            if (console) {\n                f();\n            }\n        }\n        objToCss(style, rootSelector = '', styles = []) {\n            var rootStyle = '';\n            Object.keys(style).forEach((key) => {\n                let spacer = ' ',\n                firstLetter = key[0], \n                selector = key;\n\n                if (firstLetter === '&') {\n                    spacer = '';\n                    selector = key.substring(1);\n                } \n                selector = selector.replace(/&/g, rootSelector);\n                if (typeof style[key] !== 'object') {\n                    rootStyle += key + ':' + style[key] + '; ';\n                } else {\n                    if (firstLetter === ':') {\n                        spacer = '';\n                    }\n                    var newKey = rootSelector + spacer + selector;\n                    this.objToCss(style[key], newKey, styles);\n                }\n            });\n            styles.unshift(rootSelector.trim() + '{' + rootStyle.trim() + '}');\n            return styles.join('\\n');\n        }\n    }\n\n    var react_in_style = new ReactInStyle();\n\n    return react_in_style;\n\n}));\n"]}